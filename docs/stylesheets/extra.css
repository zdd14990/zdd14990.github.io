/* ==========================================================================
   极简本地播放器 (Simple Local Player)
   ========================================================================== */
/* ==========================================================================
   极简本地播放器 (固定版)
   ========================================================================== */

/* 1. 容器位置 (固定在右下角) */
.simple-player-floating {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 99999; 
}

/* 2. 按钮外观 */
.player-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    
    /* 居中图标 */
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* 磨砂玻璃 */
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    
    /* 关键：鼠标放上去是手指形状，不再是十字箭头 */
    cursor: pointer; 
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.player-icon:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

.player-icon svg {
    stroke: #555;
    transition: stroke 0.3s;
}

/* 3. 暗色模式适配 */
[data-md-color-scheme="slate"] .player-icon {
    background: rgba(46, 48, 62, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
[data-md-color-scheme="slate"] .player-icon svg {
    stroke: #ddd;
}

/* 4. 旋转动画 */
.player-icon.playing {
    animation: rotate-player 3s linear infinite;
    border-color: #e67e96; 
}
.player-icon.playing svg {
    stroke: #e67e96;
}

@keyframes rotate-player {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 5. 移动端适配 (稍微抬高，避免挡住底部操作条) */
@media (max-width: 768px) {
    .simple-player-floating {
        bottom: 80px;
        right: 15px;
    }
}
/* ==========================================================================
   2. 全局背景图 (核心修复)
   ========================================================================== */

/* 重要：路径 ../assets/ 指的是从 stylesheets 文件夹向上一级找到 assets 文件夹
   请确保文件名完全匹配
*/


/* ==========================================================================
   3. 磨砂玻璃容器 (让文字清晰)
   ========================================================================== */

/* 正文区域 */
/* ==========================================================================
   3. 磨砂玻璃容器 (修复版：侧边栏自动高度适配)
   ========================================================================== */

/* 1. 正文区域 (中间的文章) - 保持不变 */
.md-content {
    background-color: rgba(255, 255, 255, 0.85);
    border-radius: 16px; 
    padding: 20px;
    margin-top: 20px; margin-bottom: 20px;
    backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
}

/* 2. 侧边栏 (左侧导航 + 右侧 TOC) - 强制卡片化 */
.md-sidebar__scrollwrap {
    /* 背景与磨砂 */
    background-color: rgba(255, 255, 255, 0.85) !important;
    backdrop-filter: blur(5px); 
    -webkit-backdrop-filter: blur(5px);
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    
    /* 布局间距 */
    padding: 12px;
    margin: 20px 0;
    
    /* --- 核心修复 (解决太长/不适配问题) --- */
    
    /* 1. 强制覆盖 JS 设置的高度，让高度随内容自动收缩 */
    height: auto !important; 
    min-height: 0 !important;
    
    /* 2. 限制最大高度为屏幕高度的 75%，防止顶天立地 */
    max-height: 75vh !important; 
    
    /* 3. 内容超出时显示滚动条 */
    overflow-y: auto !important;
}

/* 3. 清除外层轨道的干扰 */
.md-sidebar {
    background: none !important;
    box-shadow: none !important;
    /* 让侧边栏容器不要强制撑满 */
    height: auto !important; 
}

/* 4. 隐藏侧边栏滚动条 (美观) */
.md-sidebar__scrollwrap::-webkit-scrollbar {
    width: 0 !important; display: none;
}
.md-sidebar__scrollwrap {
    scrollbar-width: none; -ms-overflow-style: none;
}

/* 5. 暗色模式适配 */
[data-md-color-scheme="slate"] .md-content,
[data-md-color-scheme="slate"] .md-sidebar__scrollwrap {
    background-color: rgba(30, 32, 48, 0.85) !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
/* ==========================================================================
   4. 首页名片卡 (保留左侧介绍，去除了右侧文章列表样式)
   ========================================================================== */


/* ==========================================================================
   5. 主题切换平滑过渡 (修复版 - 仅针对核心容器)
   ========================================================================== */

/* 只对 body、内容卡片、侧边栏、标题栏应用过渡 
   避免对所有 DOM 元素使用通配符 *
*/

.md-content, 
.md-sidebar, 
.md-header, 
.md-footer,
.md-nav {
    transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
}

/* 伪元素背景图过渡 (之前定义的) */
body::before, 
body::after {
    transition: opacity 0.6s ease-in-out;
}

/* SVG 图标填充色过渡 */
svg {
    transition: fill 0.3s ease, stroke 0.3s ease;
}

/* ==========================================================================
   背景图淡入淡出效果 (通过伪元素实现)
   ========================================================================== */
html, body {
    background: none !important; /* 这一行至关重要，防止白色底色遮挡背景图 */
    background-color: transparent !important;
}
/* 核心：将 body 设为相对定位，为伪元素做准备 */
body {
    position: relative; 
    min-height: 100vh; 
    overflow-x: hidden; 
}

/* 伪元素基类：全屏覆盖，固定不动 */
body::before,
body::after {
    content: '';
    position: fixed; /* 固定在视口 */
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1; /* 确保背景在所有内容之下 */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: opacity 0.6s ease-in-out; /* 淡入淡出过渡时间 */
    pointer-events: none; /* 确保不影响鼠标事件 */
}

body::before {
    opacity: 1; /* 默认显示亮色伪元素 */
}
body::after {
    opacity: 0; /* 默认隐藏暗色伪元素 */
}

/* 当切换到暗色模式时 */
body[data-md-color-scheme="slate"]::before {
    opacity: 0; /* 亮色背景淡出 */
}

body[data-md-color-scheme="slate"]::after {
    opacity: 1; /* 暗色背景淡入 */
}

/* ==========================================
   打字机特效
   ========================================== */
.typing-container {
    display: inline-block;
}

.typing-text {
    overflow: hidden; /* 隐藏溢出部分 */
    border-right: 2px solid #e67e96; /* 光标颜色 */
    white-space: nowrap; /* 不换行 */
    margin: 0 auto;
    letter-spacing: 0.1em; /* 字间距 */
    
    /* 动画：打字(2秒) + 光标闪烁 */
    animation: 
        typing 2s steps(8, end), /* 这里的 steps(9) 对应你的字数(9个字)，请根据字数调整 */
        blink-caret 0.75s step-end infinite;
}

/* 打字动画：宽度从0变到100% */
@keyframes typing {
    from { width: 0 }
    to { width: 100% }
}

/* 光标闪烁动画 */
@keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: #e67e96 }
}

/* 开启 3D 硬件加速，防止倾斜时模糊 */
/* 开启 3D 硬件加速，防止倾斜时模糊 */
.profile-card {
    transform-style: preserve-3d;
    transform: perspective(1000px);
    /* 关键：这里不能有 transition: all 或 transition: transform 
       否则会覆盖 JS 的实时计算，导致卡顿
    */
    transition: box-shadow 0.3s ease !important; 
}

/* 让内部元素稍微浮起来一点，增强 3D 感 */
.avatar-wrapper, .profile-info, .visitor-badge {
    transform: translateZ(20px); /* Z轴位移 */
}